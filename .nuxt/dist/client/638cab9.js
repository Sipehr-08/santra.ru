(window.webpackJsonp=window.webpackJsonp||[]).push([[34,10],{387:function(t,o,e){var content=e(400);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(18).default)("8e04ebce",content,!0,{sourceMap:!1})},399:function(t,o,e){"use strict";e(387)},400:function(t,o,e){var r=e(17)((function(i){return i[1]}));r.push([t.i,"@media(max-width:707px){.modal__product-card{margin:0 auto;width:auto!important}.modal__product{flex-direction:block}}.modal__product-actions__button{position:static!important}.modal__product-actions{justify-content:center}.modal__product{background:#fff;border-radius:5px;box-shadow:0 10px 25px rgba(0,0,0,.5);display:flex;flex-flow:wrap;left:50%;max-height:700px;max-width:1120px;overflow-y:auto;position:absolute;top:50%;transform:translate(-50%,-50%);width:100%}.modal__product-card{margin-bottom:80px;width:49%}.modal__product-card__image{max-width:300px;width:100%}.modal__product-card__title{align-items:center;color:#000!important;font-size:20px;line-height:24px;margin:auto auto 15px;padding-bottom:5px;text-align:left;-webkit-text-decoration:none;text-decoration:none;width:90%}.modal__product-card__title p{margin:0!important}.modal__product-card__title:hover{-webkit-text-decoration:underline;text-decoration:underline}.modal__product-card__color{margin:auto;text-align:left;width:90%}.modal__product-card__color h4,.modal__product-card__color-title{color:#000;font-size:15px;font-weight:300;text-transform:none}.modal__product-card__color h4{margin:0}.modal__product-card__color h3{color:#000;font-size:20px;font-weight:700;margin:0 0 20px}.modal__product-card__colors{display:flex;flex-flow:wrap;margin:auto;width:90%}.modal__product-card__colors img{cursor:pointer;margin:5px}.modal__product-actions{display:flex;height:50px;margin:auto auto 25px;max-height:50px;position:relative;width:90%}.modal__product-actions__price{color:#000;font-family:Lato-Bold,sans-serif;font-size:25px;text-align:center;width:100%}.modal__product-actions__button{position:absolute;right:0;top:0}.modal__product-actions__button input{background:#f42f2f;border:none;border-radius:100px;box-shadow:0 1px 6px 0 rgba(213,51,51,.36),inset 0 -2px 0 0 rgba(159,36,36,.5);color:#fff;font-size:18px;font-weight:700;height:44px;line-height:1.5;width:210px}.sale{display:flex;flex-flow:column;justify-content:center;width:100%}.sale,.sale h2{text-align:center}.sale h2{color:#000;margin-bottom:85px;margin-top:25px}.sale-page-info{display:flex;justify-content:space-between;margin:15px auto auto;max-width:700px;width:100%}.sale-page-info .price{color:#000;font-family:Lato-Bold,sans-serif;font-size:25px;margin:0}.sale-page-info .oldprice{color:#000;font-size:20px;line-height:15px;margin-right:10px}.sale-page-info__button{align-items:flex-end;display:flex}.sale-page-info__button span{background:none;border:none;box-shadow:none;color:#de2828;display:inline-block;float:right;font-size:15px;line-height:1.53;margin:0 16px 5px auto;padding:0;text-align:center;-webkit-text-decoration:underline;text-decoration:underline;text-shadow:none}.sale .PB_image{margin:auto;max-width:700px}.sale .PB_image img{width:100%}",""]),r.locals={},t.exports=r},433:function(t,o,e){"use strict";e.r(o);e(234),e(16),e(145),e(28);var r=e(112),n=(e(29),e(51),e(1).default.extend({data:function(){return{totalProcent:0,chosenColors:[],totalPrice:0,just:null}},props:{items:{type:Array,required:!0},procent:{type:Number,required:!0},saleId:{type:[Number,String]}},mounted:function(){var t=this;this.chosenColors=[],this.totalPrice=0,this.items.forEach((function(element){t.chosenColors.push(0)})),this.checkPrice()},methods:{sendtoCart:function(){var t=this;if(localStorage.cartItems){var o=JSON.parse(localStorage.getItem("cartItems")),e=[];this.items.forEach((function(element,r){var n=0;o.forEach((function(o,e){o.color===element.colors[t.chosenColors[r]].id&&(n=e+1)})),n?o[n-1].ammount++:e.push({id:element.id,ammount:1,color:element.colors[t.chosenColors[r]].id,colorName:element.colors[t.chosenColors[r]].name,procent:t.procent,saleId:t.saleId,price:element.price})})),e.length>0?localStorage.setItem("cartItems",JSON.stringify([].concat(Object(r.a)(o),e))):localStorage.setItem("cartItems",JSON.stringify(o))}else{var n=[];this.items.forEach((function(element,o){n.push({id:element.id,ammount:1,color:element.colors[t.chosenColors[o]].id,colorName:element.colors[t.chosenColors[o]].name,procent:t.procent,saleId:t.saleId,price:element.price})})),localStorage.setItem("cartItems",JSON.stringify(n))}this.$emit("closeModal"),this.$router.push("/cart")},checkPrice:function(){var t=this;this.totalPrice=0,this.items.forEach((function(element,o){if(element.colors[t.chosenColors[o]].price){var e=Number(element.colors[t.chosenColors[o]].price),r=e-e/100*t.procent;t.totalPrice+=Number(r)}else{var n=Number(element.price),l=n-n/100*t.procent;t.totalPrice+=Number(l)}}))},changeColor:function(t,o){this.chosenColors[t]=o,this.checkPrice(),this.$forceUpdate()}},computed:{result:function(){}}})),l=(e(399),e(10)),component=Object(l.a)(n,(function(){var t=this,o=t._self._c;t._self._setupProxy;return o("div",[0!=t.chosenColors.length?o("form",{staticClass:"modal",on:{click:function(o){return o.target!==o.currentTarget?null:t.$emit("closeModal")},submit:function(o){return o.preventDefault(),t.sendtoCart()}}},[o("div",{staticClass:"modal__product",staticStyle:{"z-index":"99999"}},[t._l(t.items,(function(e,r){return o("div",{key:r,staticClass:"modal__product-card"},[e.images?o("img",{staticClass:"modal__product-card__image",attrs:{src:e.images.find((function(o){return o.color===e.colors[Number(t.chosenColors[r])].id})).images[0]}}):t._e(),t._v(" "),o("div",{staticClass:"modal__product-card__title",staticStyle:{display:"flex","flex-flow":"wrap"}},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),e.colors?o("div",{staticClass:"modal__product-card__color"},[o("h4",{staticClass:"modal__product-card__color-title"},[t._v("Цвета накидок:")]),t._v(" "),o("h3",{staticClass:"modal__product-card__color-description"},[t._v("\n            "+t._s(e.colors[t.chosenColors[r]].name)+"\n          ")])]):t._e(),t._v(" "),o("div",{staticClass:"modal__product-card__colors"},t._l(e.colors,(function(e,n){return o("img",{key:n,staticClass:"modal__product-card__colors-ball",attrs:{src:e.logo},on:{click:function(o){return t.changeColor(r,n)}}})})),0)])})),t._v(" "),o("div",{staticClass:"modal__product-actions"},[o("div",{staticClass:"modal__product-actions__price"},[t._v("\n          "+t._s(t.totalPrice)+" р.\n        ")]),t._v(" "),t._m(0)])],2)]):t._e()])}),[function(){var t=this._self._c;this._self._setupProxy;return t("div",{staticClass:"modal__product-actions__button"},[t("input",{attrs:{type:"submit",value:"Добавить в корзину"}})])}],!1,null,null,null);o.default=component.exports;installComponents(component,{Input:e(146).default})},512:function(t,o,e){"use strict";e.r(o);e(16),e(29),e(234);var r=e(1),n=e(433),l=r.default.extend({components:{SalesModal:n.default},layout:"default",data:function(){return{i:0,chosenColors:[],totalPrice:0,sales:[],fullItems:[],products:"",items:[],salesItems:"",modalOpen:!1,procent:0}},mounted:function(){var t=this;this.$axios.get("https://project.a-lux.dev/api/sale").then((function(o){t.sales=o.data,t.procent=o.data[0].procent,t.salesItems=o.data[0].items,t.salesItems.forEach((function(t,o){t.salesId=o+1})),t.$axios.post("https://project.a-lux.dev/api/items",{}).then((function(o){t.products=o.data,t.salesItems.forEach((function(element){t.items.push(t.products.find((function(t){return t.id===element.id})))})),t.fullItems.push(t.items)}))}))},methods:{openModal:function(a){return this.modalOpen=!0,a}}}),c=e(10),component=Object(c.a)(l,(function(){var t=this,o=t._self._c;t._self._setupProxy;return t.fullItems?o("div",{staticClass:"container"},t._l(t.sales,(function(e,r){return o("div",{key:r,staticClass:"sale"},[o("h2",[t._v(t._s(e.title))]),t._v(" "),o("div",{staticClass:"sale_label"},[t._v("АКЦИЯ")]),t._v(" "),o("div",{staticClass:"PB_image"},[o("img",{staticClass:"PB_options_image double_trouble",staticStyle:{cursor:"pointer"},attrs:{src:e.image},on:{click:function(o){return o.preventDefault(),t.openModal(r)}}})]),t._v(" "),o("div",{staticClass:"sale-page-info"},[o("div",{staticClass:"sale-page-info__price"},[o("strike",{staticClass:"oldprice"},[t._v(t._s(e.oldprice)+" р.")]),t._v(" "),o("p",{staticClass:"price"},[t._v(t._s(e.newprice)+" р.")])],1),t._v(" "),o("div",{staticClass:"sale-page-info__button",staticStyle:{cursor:"pointer"},on:{click:function(o){return o.preventDefault(),t.openModal(e.items)}}},[o("span",[t._v("Выбрать цвет")])])]),t._v(" "),t.modalOpen?o("sales-modal",{attrs:{items:t.openModal(e.items),procent:t.procent,"sale-id":e.id},on:{closeModal:function(o){t.modalOpen=!1}}}):t._e()],1)})),0):t._e()}),[],!1,null,null,null);o.default=component.exports}}]);